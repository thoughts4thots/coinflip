<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Flip</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light+Two&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <style>
        /* Preload icons hidden off-screen */
        .icon-preload {
            position: absolute;
            left: -9999px;
            font-family: 'Material Symbols Outlined';
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 48;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Shadows Into Light Two', cursive;
            background-color: #5C724A;
            background: radial-gradient(circle, transparent 20%, #5C724A 20%, #5C724A 80%, transparent 80%, transparent), radial-gradient(circle, transparent 20%, #5C724A 20%, #5C724A 80%, transparent 80%, transparent) 50px 50px, linear-gradient(#F5F5D5 4px, transparent 4px) 0 -2px, linear-gradient(90deg, #F5F5D5 4px, #5C724A 4px) -2px 0;
            background-size: 100px 100px, 100px 100px, 50px 50px, 50px 50px;
            background-attachment: fixed;
            min-height: 100vh;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            touch-action: manipulation;
        }

        .coin-container {
            width: 90vw;
            max-width: 400px;
            height: 90vw;
            max-height: 400px;
            margin: 0 auto 60px auto;
            perspective: 1000px;
            cursor: pointer;
            opacity: 1;
        }

        .coin {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .coin.flipping {
            animation: none;
        }

        .coin-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(48px, 12vw, 80px);
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #C0C0C0 0%, #E8E8E8 50%, #A8A8A8 100%);
            border: 6px solid #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .coin-front {
            transform: rotateY(0deg);
        }

        .coin-back {
            transform: rotateY(180deg) rotateZ(180deg);
        }

        .coin-text {
            color: #000;
            line-height: 1;
            word-wrap: break-word;
            font-family: 'Shadows Into Light Two', cursive;
        }

        .coin-icon {
            font-family: 'Material Symbols Outlined';
            font-size: clamp(204px, 51vw, 340px);
            color: #000;
            line-height: 1;
            font-variation-settings:
            'FILL' 1,
            'wght' 400,
            'GRAD' 0,
            'opsz' 48;
        }

        .coin-icon-small {
            font-family: 'Material Symbols Outlined';
            font-size: clamp(163px, 41vw, 272px);
            color: #000;
            line-height: 1;
            font-variation-settings:
            'FILL' 1,
            'wght' 400,
            'GRAD' 0,
            'opsz' 48;
        }

        .results-section {
            width: 90vw;
            max-width: 400px;
            margin: 0 auto;
            opacity: 1;
        }

        .results-container {
            background: #F5F1E8;
            border: 6px solid #000;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .result-box {
            text-align: center;
            padding: 10px;
        }

        .result-label {
            font-size: clamp(36px, 9vw, 48px);
            color: #000;
            margin-bottom: 5px;
        }

        .result-count {
            font-size: clamp(56px, 14vw, 80px);
            color: #000;
        }
    </style>
</head>
<body>
    <!-- Hidden elements to preload icons -->
    <span class="icon-preload">skull</span>
    <span class="icon-preload">raven</span>
    <span class="icon-preload">touch_app</span>
    
    <div class="coin-container" id="coinContainer">
        <div class="coin" id="coin">
            <div class="coin-face coin-front">
                <div class="coin-text" id="frontText"><span class="coin-icon-small">touch_app</span></div>
            </div>
            <div class="coin-face coin-back">
                <div class="coin-text" id="backText"><span class="coin-icon-small">touch_app</span></div>
            </div>
        </div>
    </div>

    <div class="results-section">
        <div class="results-container">
            <div class="results-grid">
                <div class="result-box">
                    <div class="result-label">HEADS</div>
                    <div class="result-count" id="headsCount">0</div>
                </div>
                <div class="result-box">
                    <div class="result-label">TAILS</div>
                    <div class="result-count" id="tailsCount">0</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let headsCount = 0;
        let tailsCount = 0;
        let isFlipping = false;
        let isFirstFlip = true;
        let currentRotation = 0;

        const coin = document.getElementById('coin');
        const coinContainer = document.getElementById('coinContainer');
        const frontText = document.getElementById('frontText');
        const backText = document.getElementById('backText');
        const headsCountEl = document.getElementById('headsCount');
        const tailsCountEl = document.getElementById('tailsCount');

        coinContainer.addEventListener('click', flipCoin);

        function flipCoin() {
            if (isFlipping) return;
            
            isFlipping = true;
            
            // Random result: 50/50 chance
            const result = Math.random() < 0.5 ? 'HEADS' : 'TAILS';
            
            // On first flip, set up the icons
            if (isFirstFlip) {
                // Front face = SKULL = HEADS
                frontText.innerHTML = '<span class="coin-icon">skull</span>';
                // Back face = RAVEN = TAILS
                backText.innerHTML = '<span class="coin-icon">raven</span>';
                isFirstFlip = false;
            }

            // Calculate rotation
            const rotations = 10 + Math.floor(Math.random() * 5);
            // If HEADS, land on front (skull) = 0 degrees
            // If TAILS, land on back (raven) = 180 degrees
            const additionalRotation = rotations * 360 + (result === 'HEADS' ? 0 : 180);
            currentRotation += additionalRotation;
            
            coin.style.transform = `rotateX(${currentRotation}deg)`;

            setTimeout(() => {
                // Determine which side is showing based on final rotation
                // Normalize rotation to 0-360 range
                const normalizedRotation = ((currentRotation % 360) + 360) % 360;
                
                // If rotation is close to 0째 (within 90째 either way), it's HEADS (skull)
                // If rotation is close to 180째 (within 90째 either way), it's TAILS (raven)
                const isHeads = normalizedRotation < 90 || normalizedRotation > 270;
                
                if (isHeads) {
                    headsCount++;
                    headsCountEl.textContent = headsCount;
                } else {
                    tailsCount++;
                    tailsCountEl.textContent = tailsCount;
                }
                isFlipping = false;
            }, 5000);
        }
    </script>
</body>
</html>
